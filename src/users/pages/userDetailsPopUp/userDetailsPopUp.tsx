import React, { SyntheticEvent, useState } from 'react';
import CloseIcon from './closeIcon';
import userSubImage from '../../../assets/images/subImage.png';
import { mailIcon, phoneCallIcon } from '../../../assets/icons';
import { nanoid } from 'nanoid';
import { onlineStatus } from '../../../assets/icon';
import Button from '../../component/Button';
import RatingReview from './ratingReview';
import { Edit } from './editRating';
import RecentActivity from './recentActivity';
import { closeModal } from '../../../redux/actions-creators/modalActions';

function userDetailsPopUp({ details }: any) {
  const [revieweSection, setReviewSection] = useState('Edit');
  const data = [
    { type: 'Customers', value: '12,000' },
    { type: 'Sales', value: 'USD $22,897' },
    { type: ' Orders', value: '800' }
  ];
  const calculations = [
    { type: 'Average order value', value: '$42.0' },
    { type: 'Refund Rate', value: '0.0%' },
    { type: 'Fulfilment rate', value: '87.7' },
    { type: 'Average items per order', value: '1.0' },
    { type: 'Subscribed to email list', value: '2,388' }
  ];

  const activityStatus = {
    title: 'Last activity',
    Date: '11 April 2023 at 10:Am',
    status: 'online'
  };

  const handleTabs = (tab: any) => {
    console.log(tab);
  };

  const handleEdit = (e?: SyntheticEvent) => {
    if (revieweSection == 'Edit') {
      setReviewSection('Save');
      e?.stopPropagation();
    } else if (revieweSection == 'Save') {
      setReviewSection('Edit');
      e?.stopPropagation();
    }
  };
  const haddleClose = ()=>{
    return  dispatch(closeModal())
  }
  return (
    <section className="flex flex-col absolute right-[0%] h-[100%] w-[100%] md:w-[557px] justify-center  -z-0 whitespace-nowrap overflow-auto scrollbar-hide ">
      <section className="absolute" onClick={haddleClose}>
        <CloseIcon closeModal={haddleClose} />
      </section>
      <section className=" bg-white p-[16px]  w-[100%] flex-col whitespace-nowrap overflow-auto scrollbar-hide h-[1721px] justify-center items-center align-middle ">
        <section className="flex flex-col relative rounded-lg w-[100%] h-[600px] max-sm:h-[893px] border border-[#F1F1F1] ">
          <div className="   max-sm:h-[200px] max-sm:relative  mb-10   ">
            <div className=" flex  flex-row p-[16px] justify-between w-[100%]">
              <div className="flex flex-col md:flex-row  w-[100%]  md:justify-between  md:items-center">
                <span className="flex flex-row md:w-[170px] w-[100%]  md:items-center ">
                  <img
                    src={userSubImage}
                    alt=""
                    width={'47px'}
                    height={'47px'}
                    sizes="47*47 "
                    srcSet=""
                    className="rounded-full"
                  />
                  <span className="  text-[#696E7C] ml-[24px] font-[500] tex-[16px] font-Corsa-Grotesk">
                    {details.name}
                  </span>
                </span>
                <span className="flex flex-row  max-sm:absolute max-sm:top-[100%] ">
                  <svg
                    width="100"
                    height="32"
                    viewBox="0 0 100 32"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <rect width="100" height="32" rx="4" fill="#FA3246" />
                    <path
                      d="M14.44 21C15.64 21 16.6 20.604 17.32 19.824C18.052 19.032 18.412 18.024 18.412 16.8C18.4 15.576 18.04 14.568 17.308 13.788C16.588 12.996 15.628 12.6 14.44 12.6H11.08V21H14.44ZM12.34 13.596H14.152C15.988 13.596 17.08 14.844 17.08 16.776C17.08 17.748 16.828 18.54 16.324 19.128C15.82 19.716 15.088 20.004 14.14 20.004H12.34V13.596ZM25.7549 17.508C25.7549 16.632 25.4789 15.936 24.9389 15.432C24.3989 14.916 23.6789 14.664 22.7549 14.664C21.7229 14.664 20.9189 14.964 20.3429 15.552C19.7669 16.14 19.4789 16.92 19.4789 17.88C19.4789 18.852 19.7789 19.632 20.3909 20.22C21.0029 20.808 21.8549 21.096 22.9709 21.096C23.9909 21.096 24.8669 20.784 25.6229 20.148L25.0949 19.344C24.4709 19.92 23.7629 20.208 22.9829 20.208C21.7229 20.208 20.8109 19.572 20.7149 18.228H25.6949C25.7309 17.952 25.7549 17.712 25.7549 17.508ZM22.7549 15.516C23.8469 15.516 24.5189 16.2 24.5189 17.256C24.5189 17.34 24.5189 17.4 24.5069 17.436H20.7149C20.8229 16.2 21.6029 15.516 22.7549 15.516ZM28.2473 21V11.736H27.0593V21H28.2473ZM35.8213 17.508C35.8213 16.632 35.5453 15.936 35.0053 15.432C34.4653 14.916 33.7453 14.664 32.8213 14.664C31.7893 14.664 30.9853 14.964 30.4093 15.552C29.8333 16.14 29.5453 16.92 29.5453 17.88C29.5453 18.852 29.8453 19.632 30.4573 20.22C31.0693 20.808 31.9213 21.096 33.0373 21.096C34.0573 21.096 34.9333 20.784 35.6893 20.148L35.1613 19.344C34.5373 19.92 33.8293 20.208 33.0493 20.208C31.7893 20.208 30.8773 19.572 30.7813 18.228H35.7613C35.7973 17.952 35.8213 17.712 35.8213 17.508ZM32.8213 15.516C33.9133 15.516 34.5853 16.2 34.5853 17.256C34.5853 17.34 34.5853 17.4 34.5733 17.436H30.7813C30.8893 16.2 31.6693 15.516 32.8213 15.516ZM39.6706 21.096C40.3306 21.096 40.8346 21.06 41.1946 20.976L41.1706 20.028C40.7026 20.112 40.2946 20.148 39.9346 20.148C39.1066 20.088 38.9986 19.584 39.0106 18.984V15.672H41.1586V14.76H39.0106V12.78H37.9306V13.836C37.9306 14.46 37.7026 14.76 37.0666 14.76H36.3586V15.672H37.8226V19.08C37.8226 20.328 38.4226 21.096 39.6706 21.096ZM48.1494 17.508C48.1494 16.632 47.8734 15.936 47.3334 15.432C46.7934 14.916 46.0734 14.664 45.1494 14.664C44.1174 14.664 43.3134 14.964 42.7374 15.552C42.1614 16.14 41.8734 16.92 41.8734 17.88C41.8734 18.852 42.1734 19.632 42.7854 20.22C43.3974 20.808 44.2494 21.096 45.3654 21.096C46.3854 21.096 47.2614 20.784 48.0174 20.148L47.4894 19.344C46.8654 19.92 46.1574 20.208 45.3774 20.208C44.1174 20.208 43.2054 19.572 43.1094 18.228H48.0894C48.1254 17.952 48.1494 17.712 48.1494 17.508ZM45.1494 15.516C46.2414 15.516 46.9134 16.2 46.9134 17.256C46.9134 17.34 46.9134 17.4 46.9014 17.436H43.1094C43.2174 16.2 43.9974 15.516 45.1494 15.516ZM56.0759 14.664C55.0799 14.664 54.1439 15.072 53.6759 15.876L53.5559 14.76H52.5359V23.04H53.7239V20.04C54.2159 20.748 54.9959 21.096 56.0639 21.096C57.0479 21.096 57.8159 20.796 58.3799 20.184C58.9439 19.572 59.2199 18.804 59.2199 17.88C59.2199 16.956 58.9439 16.188 58.3799 15.576C57.8279 14.964 57.0599 14.664 56.0759 14.664ZM55.8479 20.112C55.2359 20.112 54.7199 19.908 54.3119 19.488C53.9039 19.068 53.6999 18.528 53.6999 17.88C53.6999 17.22 53.9039 16.68 54.3119 16.272C54.7319 15.852 55.2359 15.648 55.8479 15.648C56.4839 15.648 56.9999 15.852 57.3959 16.26C57.7919 16.656 57.9959 17.196 57.9959 17.88C57.9959 18.564 57.7919 19.104 57.3959 19.512C56.9999 19.908 56.4839 20.112 55.8479 20.112ZM63.3723 14.676C62.4963 14.676 61.8603 15.348 61.6083 16.272L61.5003 14.76H60.5163V21H61.7043V18.324C61.7043 17.544 61.8483 16.908 62.1243 16.416C62.4003 15.924 62.8083 15.672 63.3483 15.672C63.4923 15.672 63.6963 15.696 63.9483 15.744L63.9723 14.76C63.7683 14.7 63.5643 14.676 63.3723 14.676ZM67.8394 21.096C68.8354 21.096 69.6394 20.808 70.2634 20.22C70.8994 19.632 71.2114 18.864 71.2114 17.892C71.2114 16.92 70.8994 16.14 70.2754 15.552C69.6514 14.964 68.8354 14.664 67.8394 14.664C66.8314 14.664 66.0154 14.952 65.3914 15.54C64.7674 16.128 64.4554 16.908 64.4554 17.892C64.4554 18.864 64.7674 19.632 65.3914 20.22C66.0274 20.808 66.8434 21.096 67.8394 21.096ZM66.2674 19.512C65.8714 19.116 65.6674 18.576 65.6674 17.892C65.6674 17.208 65.8714 16.668 66.2674 16.26C66.6754 15.852 67.2034 15.648 67.8394 15.648C68.4754 15.648 69.0034 15.852 69.3994 16.26C69.8074 16.668 70.0114 17.208 70.0114 17.892C70.0114 18.576 69.8074 19.116 69.3994 19.512C69.0034 19.908 68.4754 20.112 67.8394 20.112C67.2034 20.112 66.6754 19.908 66.2674 19.512ZM74.0789 21V15.66H75.9629V14.76H74.0789V13.74C74.0789 12.888 74.4269 12.516 75.1829 12.516C75.4349 12.516 75.7109 12.564 76.0229 12.672L76.0949 11.736C75.7229 11.652 75.3269 11.604 74.9309 11.604C73.5749 11.604 72.8909 12.228 72.8909 13.62V14.76H71.6789V15.66H72.8909V21H74.0789ZM78.1575 13.356C78.4815 13.032 78.4815 12.492 78.1575 12.192C77.8335 11.868 77.3055 11.868 76.9815 12.192C76.6575 12.492 76.6575 13.032 76.9815 13.356C77.3055 13.656 77.8335 13.656 78.1575 13.356ZM78.1575 21V14.76H76.9695V21H78.1575ZM81.0754 21V11.736H79.8874V21H81.0754ZM88.6494 17.508C88.6494 16.632 88.3734 15.936 87.8334 15.432C87.2934 14.916 86.5734 14.664 85.6494 14.664C84.6174 14.664 83.8134 14.964 83.2374 15.552C82.6614 16.14 82.3734 16.92 82.3734 17.88C82.3734 18.852 82.6734 19.632 83.2854 20.22C83.8974 20.808 84.7494 21.096 85.8654 21.096C86.8854 21.096 87.7614 20.784 88.5174 20.148L87.9894 19.344C87.3654 19.92 86.6574 20.208 85.8774 20.208C84.6174 20.208 83.7054 19.572 83.6094 18.228H88.5894C88.6254 17.952 88.6494 17.712 88.6494 17.508ZM85.6494 15.516C86.7414 15.516 87.4134 16.2 87.4134 17.256C87.4134 17.34 87.4134 17.4 87.4014 17.436H83.6094C83.7174 16.2 84.4974 15.516 85.6494 15.516Z"
                      fill="#FBFCFF"
                    />
                  </svg>
                </span>
              </div>
            </div>
            <div className=" max-sm:ml-[16px] gap-[16px] flex flex-col md:flex-row  items-start justify-center text-[#696E7C] font-Corsa-Grotesk text-[14px]">
              <div className="flex flex-row items-center text-[#696E7C]">
                <span className="flex mr-[11px]">{mailIcon()}</span>
                <span>{details.email}</span>
              </div>
              <div className="flex flex-row items-center  text-[#696E7C] ">
                <span className="flex mr-[11px]">{phoneCallIcon()}</span>
                <span className=" text-[#696E7C]">{'(+46) 555-0128'}</span>
              </div>
            </div>
          </div>
          <hr className="h-[1px] mr-auto ml-auto w-[100%] max-sm:w-[96%] justify-self-center p-[0.5px] max-sm:flex  bg-[#F1F1F1]" />
          <div className="flex w-[100%] flex-row  p-[16px] ">
            <span className=" text-[#696E7C]">{'Shopify Verified'}</span>
            <span className="ml-[10.5px]">
              <svg
                width="22"
                height="22"
                viewBox="0 0 22 22"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M12.8425 19.2498C12.3934 19.2498 11.9717 19.0389 11.6234 18.8556C11.4034 18.7456 11.1375 18.6081 11 18.6081C10.8625 18.6081 10.5875 18.7456 10.3767 18.8556C9.93671 19.0848 9.38671 19.3598 8.80004 19.2039C8.19504 19.0481 7.86504 18.5164 7.59004 18.0948C7.47087 17.9023 7.30587 17.6456 7.19587 17.5814C7.08587 17.5173 6.79254 17.5081 6.54504 17.4898C6.05004 17.4623 5.43587 17.4348 4.99587 17.0039C4.55587 16.5548 4.52837 15.9406 4.50087 15.4456C4.49171 15.2073 4.47337 14.9048 4.40921 14.7948C4.35421 14.6939 4.08837 14.5289 3.90504 14.4098C3.48337 14.1348 2.96087 13.7956 2.79587 13.1998C2.64004 12.6131 2.91504 12.0631 3.14421 11.6231C3.25421 11.4031 3.39171 11.1373 3.39171 10.9998C3.39171 10.8623 3.25421 10.5873 3.14421 10.3764C2.91504 9.93644 2.64004 9.38644 2.79587 8.79979C2.95171 8.19479 3.48337 7.86479 3.90504 7.58979C4.09754 7.47063 4.35421 7.30563 4.41837 7.19563C4.48254 7.08563 4.49171 6.79229 4.51004 6.54479C4.53754 6.04979 4.56504 5.43563 4.99587 4.99563C5.44504 4.55563 6.05921 4.52813 6.55421 4.50063C6.79254 4.49146 7.09504 4.47313 7.20504 4.40896C7.30587 4.35396 7.47087 4.08813 7.59004 3.90479C7.86504 3.48313 8.20421 2.96063 8.80004 2.79563C9.38671 2.63979 9.93671 2.91479 10.3767 3.14396C10.5967 3.25396 10.8625 3.39146 11 3.39146C11.1375 3.39146 11.4125 3.25396 11.6234 3.14396C12.0634 2.92396 12.6134 2.63979 13.2 2.79563C13.805 2.95146 14.135 3.48313 14.41 3.90479C14.5292 4.09729 14.6942 4.35396 14.8042 4.41813C14.9142 4.48229 15.2075 4.49146 15.455 4.50979C15.95 4.53729 16.5642 4.56479 17.0042 4.99563C17.4442 5.44479 17.4717 6.05896 17.4992 6.55396C17.5084 6.79229 17.5267 7.09479 17.5909 7.20479C17.6459 7.30563 17.9117 7.47063 18.095 7.58979C18.5167 7.86479 19.0392 8.20396 19.2042 8.79979C19.36 9.38644 19.085 9.93644 18.8559 10.3764C18.7459 10.5964 18.6084 10.8623 18.6084 10.9998C18.6084 11.1373 18.7459 11.4123 18.8559 11.6231C19.085 12.0631 19.36 12.6131 19.2042 13.1998C19.0484 13.8048 18.5167 14.1348 18.095 14.4098C17.9025 14.5289 17.6459 14.6939 17.5817 14.8039C17.5175 14.9139 17.5084 15.2073 17.49 15.4548C17.4625 15.9498 17.435 16.5639 17.0042 17.0039C16.555 17.4439 15.9409 17.4714 15.4459 17.4989C15.2075 17.5081 14.905 17.5264 14.795 17.5906C14.6942 17.6456 14.5292 17.9114 14.41 18.0948C14.135 18.5164 13.7959 19.0389 13.2 19.2039C13.0809 19.2406 12.9617 19.2498 12.8425 19.2498ZM9.16671 4.12479C9.16671 4.12479 9.16671 4.12479 9.15754 4.12479C9.06587 4.16146 8.85504 4.47313 8.7542 4.64729C8.5342 4.98646 8.28671 5.37146 7.89254 5.60063C7.48921 5.82979 7.03087 5.85729 6.61837 5.87563C6.41671 5.88479 6.04087 5.90313 5.95837 5.96729C5.90337 6.04063 5.88504 6.40729 5.87587 6.60896C5.85754 7.02146 5.83004 7.47979 5.60087 7.87396C5.37171 8.26813 4.98671 8.51563 4.64754 8.73563C4.47337 8.84563 4.16171 9.04729 4.12504 9.14813C4.11587 9.24894 4.27171 9.56061 4.36337 9.74394C4.54671 10.1106 4.76671 10.5231 4.76671 10.9906C4.76671 11.4581 4.55587 11.8706 4.36337 12.2373C4.27171 12.4206 4.10671 12.7323 4.12504 12.8331C4.16171 12.9248 4.47337 13.1356 4.64754 13.2364C4.98671 13.4564 5.37171 13.7039 5.60087 14.0981C5.83004 14.5014 5.85754 14.9598 5.87587 15.3723C5.88504 15.5739 5.90337 15.9498 5.96754 16.0323C6.04087 16.0873 6.40754 16.1056 6.60921 16.1148C7.02171 16.1331 7.48004 16.1606 7.87421 16.3898C8.26837 16.6189 8.51587 17.0039 8.73587 17.3431C8.84587 17.5173 9.04754 17.8289 9.14837 17.8656C9.24005 17.8931 9.56088 17.7189 9.74421 17.6273C10.1109 17.4439 10.5234 17.2239 10.9909 17.2239C11.4584 17.2239 11.8709 17.4348 12.2375 17.6273C12.4209 17.7189 12.7142 17.8931 12.8334 17.8656C12.925 17.8289 13.1359 17.5173 13.2367 17.3431C13.4567 17.0039 13.7042 16.6189 14.0984 16.3898C14.5017 16.1606 14.96 16.1331 15.3725 16.1148C15.5742 16.1056 15.95 16.0873 16.0325 16.0231C16.0875 15.9498 16.1059 15.5831 16.115 15.3814C16.1334 14.9689 16.1609 14.5106 16.39 14.1164C16.6192 13.7223 17.0042 13.4748 17.3434 13.2548C17.5175 13.1448 17.8292 12.9431 17.8659 12.8423C17.875 12.7414 17.7192 12.4298 17.6275 12.2464C17.4442 11.8798 17.2242 11.4673 17.2242 10.9998C17.2242 10.5323 17.435 10.1198 17.6275 9.75311C17.7192 9.56978 17.875 9.25811 17.8659 9.15729C17.8292 9.05646 17.5084 8.85479 17.3434 8.74479C17.0042 8.52479 16.6192 8.27729 16.39 7.88313C16.1609 7.47979 16.1334 7.02146 16.115 6.60896C16.1059 6.40729 16.0875 6.03146 16.0234 5.94896C15.95 5.89396 15.5834 5.87563 15.3817 5.86646C14.9692 5.84813 14.5109 5.82063 14.1167 5.59146C13.7225 5.36229 13.475 4.97729 13.255 4.63813C13.145 4.46396 12.9434 4.15229 12.8425 4.11563C12.7509 4.08813 12.43 4.26229 12.2467 4.35396C11.88 4.53729 11.4675 4.75729 11 4.75729C10.5325 4.75729 10.12 4.54646 9.75338 4.35396C9.57005 4.26229 9.27671 4.11563 9.16671 4.11563V4.12479ZM9.61588 14.2173C9.43255 14.2173 9.25838 14.1439 9.13004 14.0156L6.82921 11.7148C6.56337 11.4489 6.56337 11.0089 6.82921 10.7431C7.09504 10.4773 7.53504 10.4773 7.80087 10.7431L9.61588 12.5581L14.19 7.98396C14.4559 7.71813 14.8959 7.71813 15.1617 7.98396C15.4275 8.24979 15.4275 8.68979 15.1617 8.95563L10.1017 14.0156C9.97338 14.1439 9.79921 14.2173 9.61588 14.2173Z"
                  fill="#4B6EFF"
                />
              </svg>
            </span>
          </div>

          <div className="flex  text-[#696E7C]  px-[16px]  max-[320px]:flex-col flex-row  w-[100%] justify-between mt-[29px] items-center align-middle">
            <pre className="  text-[#696E7C] text-[12px] flex font-Corsa-Grotesk font-normal">{`Store activity`}</pre>
            <pre className="  text-[#696E7C] font-Corsa-Grotesk font-normal flex  w-[190px] h-[40px]  rounded-md p-[10px] bg-[#F1F1F166] text-[12px]">
              {'March 2023-September 2020'}
            </pre>
          </div>
          <div className=" w-[100%] flex text-[12px] mt-[20px]  px-[16px] flex-col md:flex-row  sm:px-[16px] justify-between">
            {data.map((op) => (
              <div
                key={nanoid(5)}
                className=" font-Corsa-Grotesk flex  flex-col w-80%]   md:w-[143px] border gap-[8px] p-[8px] justify-between my-[5px]"
              >
                <span className=" flex text-[#A1A5AD] ">{op.type}</span>
                <span className=" flex text-[16px]  text-[#A1A5AD] ">
                  {op.value}
                </span>
              </div>
            ))}
          </div>

          <div className=" w-[100%]  flex  max-sm:justify-between items-stretch leading-3 flex-wrap flex-row  px-[16px]  text-[12px]">
            {calculations.map((op) => (
              <div
                key={nanoid(5)}
                className=" font-Corsa-Grotesk md:mr-2  flex max-sm:max-w-[150px] md:min-w-[30%] max-w-[35%]  flex-1  justify-start  flex-col   pr-[8px]  max-sm:justify-between my-[16px]"
              >
                <pre className=" h-[32px]  font-Corsa-Grotesk flexflex text-[#A1A5AD]  md:border-r  ">
                  {op.type}
                </pre>
                <pre className=" font-Corsa-Grotesk  flex text-[16px]  text-[#A1A5AD] mt-[8px]">
                  {op.value}
                </pre>
              </div>
            ))}
          </div>
        </section>
        <section className=" flex w-[100%] h-[73px] font-Corsa-Grotesk bg-white text-[12px] text-[#A1A5AD] justify-end">
          <div className="w-[234px] flex flex-row items-center">
            <span className=" flex-row text-[12px] flex mr-[9px] ">
              {onlineStatus(
                `${activityStatus.status == 'online' ? '#00AA55' : '#FA5F64'}`
              )}
            </span>
            <span>{`${activityStatus.title}:${activityStatus.Date}`}</span>
          </div>
        </section>
        <section className="flex flex-col relative  mb-10 rounded-lg w-[100%] h-[497px] max-sm:h-[793px] border border-[#F1F1F1] ">
          <div className=" relative max-sm:h-[10%] flex flex-row p-[16px] justify-between w-[100%]   md:items-center">
            <span className="flex flex-row md:w-[100%] w-[100%]  items-center  text-[#696E7C]  text-[14px] ">
              Reviews
            </span>
            <div className="flex  max-sm:justify-end  text-[#696E7C] md:gap-[17px] px-[16px]  md:max-[320px]:flex-col flex-row  w-[100%]  md:justify-between  items-center align-middle">
              <pre className="  absolute left-[0%] max-sm:ml-[16px] md:relative   top-[80%] text-[#696E7C] font-Corsa-Grotesk font-normal flex  w-[190px] h-[40px]  rounded-md p-[10px] bg-[#F1F1F166] text-[12px]">
                {'March 2023-September 2020'}
              </pre>
              <Button
                text={revieweSection}
                onClick={handleEdit}
                className="bg-[#4B6EFF] text-white rounded-md hover:opacity-[0.5] text-[12px] outline-none border-none w-[91px] h-[32px] items-center justify-center"
              />
            </div>
          </div>
          <hr className="h-[1px] max-sm:mt-[50px] mr-auto ml-auto w-[100%] max-sm:w-[96%] justify-self-center p-[0.5px] max-sm:flex  bg-[#F1F1F1]" />
          <section className=" flex max-sm:w-[100%] w-[100%]  h-[300px] justify-center align-middle relative">
            {revieweSection == 'Edit' ? <RatingReview /> : <Edit />}
          </section>
        </section>
        <RecentActivity />
      </section>
    </section>
  );
}

export default userDetailsPopUp;
function dispatch(arg0: any) {
  throw new Error('Function not implemented.');
}

